<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stock.premium.mapper.ExchangeRateRecordMapper">

    <!-- 查询指定日期的最新汇率 -->
    <select id="selectLatestByDate" resultType="com.stock.premium.entity.ExchangeRateRecord">
        SELECT id, currency_pair, rate, trade_date, data_source, created_time
        FROM exchange_rate_record
        WHERE trade_date = #{tradeDate}
        ORDER BY created_time DESC
        LIMIT 1
    </select>

    <!-- 查询最新的汇率记录 -->
    <select id="selectLatest" resultType="com.stock.premium.entity.ExchangeRateRecord">
        SELECT id, currency_pair, rate, trade_date, data_source, created_time
        FROM exchange_rate_record
        ORDER BY trade_date DESC, created_time DESC
        LIMIT 1
    </select>

</mapper>